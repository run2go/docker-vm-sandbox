<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="./inc/favicon.png">
    <link rel="icon" href="./inc/favicon.svg" type="image/svg+xml">
    <title>suso.ch</title>
    <style>
        body {
            margin: 0;
            background-color: black;
            display: flex;
            height: 100vh;
        }
        .logo {
            width: 30%;
            height: 30%;
        }
    </style>
    <script src="./inc/socket.io/socket.io.min.js"></script>
    <script>
        const socket = io();

        let cmd = '';
        document.addEventListener('keydown', inputCommand);
        document.addEventListener('click', function(event) { send(event.clientX, event.clientY); });

        function inputCommand(event) {
            if (event.keyCode === 13) {
                if (cmd.length >= 2) {
                send(cmd.toLowerCase().trim());
                }
                cmd = '';
            }
            else if (event.keyCode === 8) {
                cmd = cmd.slice(0, -1);
            }
            else { 
                cmd += event.key;
            }
        }

        function send(...args) {
            let data = '';

            if (args.length === 1) { data = args[0]; }
            else if (args.length === 2) { data = JSON.stringify({ x: args[0], y: args[1] }); }

            socket.emit('input', data);
            console.log('cmd sent: ' + data);
        }

        socket.on('connect', () => {
            console.log('Connected to server');
        });

        socket.on('output', (message) => {
            console.log('Server response:', message);
            // Handle server response if needed
        });

        socket.on('consoleOutput', (output) => {
            // Handle console output from server
            console.log('Console Output:', output);
        });
    </script>
</head>

<body>
    <svg class="logo" style="margin: auto; background: rgba(0, 0, 0, 0); display: block;" viewBox="0 0 100 100">
        <path fill="none" stroke="#ffffff" stroke-width="10" stroke-linecap="round" stroke-dasharray="128.3 128.3" d="M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z">
            <animate attributeName="stroke-dashoffset" repeatCount="indefinite" dur="3s" keyTimes="0;1" values="0;256.0"></animate>
        </path>
    </svg>
</body>

</html>